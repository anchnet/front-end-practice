---
title: 技术分享之Git撤销提交
date: 2021-05-06
tags:
- 技术分享
- Git
---

分享者：小打、何鑫辉

## 起因
本次分享属于临时起意，当天小辉哥花了半天时间追查一个 Bug，最后发现问题原因是某次需要撤销的代码提交没有被正确撤销。这类 Git 操作问题在团队中时常出现，不经意间的失误往往会带来难以定位的 Bug，降低软件质量。我们决定临时发起一次关于 Git 的技术分享，趁热打铁提醒所有的同学。

## 撤销提交
Git 有两个命令可以用来撤销/回滚代码，分别是 Reset 和 Revert，可结合当前项目分支情况选择适用的命令。这两个命令最大的区别是：Reset 通过 **抹去** 原有的提交记录达到代码回滚的目的，可能造成本地分支 **落后** 远程分支的结果；Revert 通过 **新增** 与原有提交记录代码改动完全相反的代码提交以达到代码撤销的目的，操作完成后本地分支会 **领先** 远程分支。因此，使用 Revert 撤销代码后可以顺利地推送到远程，而 Reset 回滚后会因为落后于远程而无法推送。这时只能通过 push -f 强推，而这个命令有相当的风险，非常不建议在多人协作的项目中进行使用。

## 命令行 vs 工具
相当部分同学喜欢或习惯于使用工具进行 Git 操作，但我个人认为，命令行操作才是最重要、最可靠的。当我们使用工具进行 Git 操作时，工具只是代替我们执行需要的 Git 命令，但其实我们无法确认工具执行的具体命令是什么、是否 **准确地** 完成我们想要的操作，是否会带来额外的副作用。假如有同学使用工具进行 Git 操作但不止一次出现问题、并且自己都无法弄清原因的，我作为团队主管将 **强制** 要求未来不准再使用工具，必须使用命令行。

## 更多
多位同学在本次技术分享的讨论时间分享了过去项目中的 Git 使用经验以及遇到的问题，也提了不少建设性意见，比如分支名及操作流程的规范等，在此就不一一列举了。希望在以后的开发过程中，大家，特别是同一个项目组的前端同学之间有更多的交流沟通，并能够将好的 Git 操作实践在实际项目中落地。
